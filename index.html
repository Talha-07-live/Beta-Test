<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>Talha's Collection</title>
Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
Â  <link rel="icon" href="https://s10.gifyu.com/images/SrMU9.png">
Â  <style>
Â  Â  :root{
Â  Â  Â  --bg:#0c0714; 
Â  Â  Â  --card:#161129;
Â  Â  Â  --muted:#a7a4b4;
Â  Â  Â  --primary:#19d3ff;
Â  Â  Â  --primary-2:#4f46e5;
Â  Â  Â  --accent:#ff6b6b;
Â  Â  Â  --radius:16px;
Â  Â  Â  --shadow:0 10px 30px rgba(0,0,0,.35);
Â  Â  }
Â  Â  *{box-sizing:border-box}
Â  Â  html,body{height:100%}
Â  Â  body{
Â  Â  Â  margin:0; font-family:Poppins, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
Â  Â  Â  background: radial-gradient(1000px 600px at -10% -10%, #201a35 0%, transparent 60%),
Â  Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(800px 500px at 120% 0%, #1b1530 0%, transparent 60%),
Â  Â  Â  Â  Â  Â  Â  Â  Â  var(--bg);
Â  Â  Â  color:#fff;
Â  Â  }
Â  Â  .container{max-width:1280px;margin:0 auto;padding:18px 16px}

Â  Â  /* Header */
Â  Â  .header{display:flex;align-items:center;gap:14px;flex-wrap:wrap;position:sticky;top:0;z-index:20;background:linear-gradient(180deg, rgba(12,7,20,.95), rgba(12,7,20,.65) 60%, transparent);backdrop-filter:saturate(140%) blur(6px)}
Â  Â  .logo{font-weight:800;letter-spacing:1px;font-size:clamp(22px,3.2vw,34px)}
Â  Â  .logo span{background:linear-gradient(90deg,#ff6b6b,#feca57,#1dd1a1,#48dbfb,#5f27cd); -webkit-background-clip:text; background-clip:text; color:transparent;}
Â  Â  .tld{color:#ff4d4f;font-weight:800;margin-left:4px}
Â  Â  .searchbar{margin-left:auto;display:flex;gap:10px;align-items:center;flex:1;justify-content:flex-end;position:relative}
Â  Â  .searchbar input{width:100%; max-width:540px; background:#0d0a1a;border:1px solid #2a2348;color:#fff;padding:12px 14px;border-radius:999px;outline:none;transition:.2s; font-size:14px;}
Â  Â  .searchbar input::placeholder{color:#7f7a95}
Â  Â  .searchbar input:focus{border-color:#5b54ff; box-shadow:0 0 0 4px rgba(79,70,229,.25)}
Â  Â  .btn{border:0;border-radius:999px;padding:12px 18px;font-weight:800;cursor:pointer;background:linear-gradient(90deg,var(--primary),var(--primary-2));color:#0b0b0b; white-space:nowrap;}

Â  Â  /* Suggestions dropdown */
Â  Â  .sugg{position:absolute;top:100%;right:0; width:100%; max-width:540px;
Â  Â  Â  background:#0d0a1a;border:1px solid #2a2348;border-radius:12px;margin-top:8px;box-shadow:var(--shadow);max-height:280px;overflow:auto;display:none; z-index:30;}
Â  Â  .sugg.show{display:block;animation:fade .12s ease}
Â  Â  .sugg-item{padding:10px 12px;cursor:pointer;border-bottom:1px solid rgba(255,255,255,.04);display:flex;justify-content:space-between;gap:10px}
Â  Â  .sugg-item:hover{background:#15102a}
Â  Â  .sugg-item small{color:#9e99b6; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}

Â  Â  /* Section */
Â  Â  .section-title{display:flex;align-items:center;gap:10px;background:#1b1530;border:1px solid #2a2348;padding:10px 14px;border-radius:12px;box-shadow:var(--shadow)}
Â  Â  .section-title .flame{width:28px;height:28px;border-radius:8px;background:#1f1838;display:grid;place-items:center;}
Â  Â  .section-title h2{margin:0;font-size:clamp(16px,2.5vw,20px);letter-spacing:.2px}
Â  Â  .request-btn{margin-left:auto;text-decoration:none;color:#0b0b0b;background:linear-gradient(90deg,var(--primary),var(--primary-2));padding:10px 14px;border-radius:12px;font-weight:800}

Â  Â  /* Grid */
Â  Â  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:18px;margin-top:16px}
Â  Â  @media (min-width:480px){ .grid{grid-template-columns:repeat(auto-fit,minmax(200px,1fr));} }

Â  Â  /* Card */
Â  Â  .card{position:relative;border-radius:16px;overflow:hidden;background:var(--card);border:1px solid #2a2348;box-shadow:var(--shadow);transition:transform .25s ease, box-shadow .25s ease}
Â  Â  .card:hover{transform:translateY(-4px) scale(1.02);box-shadow:0 14px 40px rgba(0,0,0,.45)}
Â  Â  .thumb{aspect-ratio:2/3;width:100%;object-fit:cover;display:block;filter:saturate(1.05)}

Â  Â  /* Grad & overlays */
Â  Â  .grad{position:absolute;inset:auto 0 0 0;height:52%;background:linear-gradient(180deg,transparent,rgba(0,0,0,.9))}
Â  Â  .ribbon{position:absolute;top:10px;left:10px;z-index:5;background:linear-gradient(90deg,#ff6b6b,#f06595);color:#fff;font-weight:800;padding:6px 10px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,.35);font-size:12px;letter-spacing:.4px;pointer-events:none}
Â  Â  .badge{position:absolute;bottom:12px;right:12px;z-index:5;background:#1b1530;border:1px solid #2a2348;padding:6px 8px;border-radius:8px;color:#d6d2e6;font-weight:700;font-size:12px}
Â  Â  .age{position:absolute;bottom:12px;left:12px;display:flex;align-items:center;gap:6px;background:rgba(0,0,0,.45);backdrop-filter:blur(6px);padding:6px 10px;border-radius:999px;font-size:12px; z-index:5;}

Â  Â  /* Meta */
Â  Â  .meta{padding:10px 12px 14px}
Â  Â  .title{font-weight:800;font-size:clamp(14px,2.4vw,16px);line-height:1.35;margin:0 0 6px 0;color:#faf8ff}
Â  Â  .subtitle{margin:0;color:var(--muted);font-size:clamp(11px,2vw,12px)}

Â  Â  /* Modal */
Â  Â  .modal{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;align-items:center;justify-content:center;padding:16px;z-index:99}
Â  Â  .modal.show{display:flex;animation:fade .2s ease}
Â  Â  @keyframes fade{from{opacity:0}to{opacity:1}}
Â  Â  .sheet{width:min(980px,100%);background:#140f26;border:1px solid #302a55;border-radius:20px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.55)}
Â  Â  .sheet-head{display:grid;grid-template-columns:140px 1fr;gap:14px;padding:14px}
Â  Â  @media (min-width:720px){ .sheet-head{grid-template-columns:200px 1fr;gap:16px;padding:16px} }
Â  Â  .sheet-head img{width:100%;border-radius:14px;border:1px solid #2a2348}
Â  Â  .sheet-head .info h3{margin:0 0 8px 0;font-size:clamp(18px,3vw,24px)}
Â  Â  .sheet-head .info p{margin:6px 0;color:#d5d1e6}
Â  Â  .rating{display:inline-flex;align-items:center;gap:6px;background:rgba(255,255,255,.06);padding:6px 10px;border-radius:999px;font-weight:800}

Â  Â  .links{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px;padding:12px 16px 18px;background:#0e0b1a;border-top:1px solid #2a2348;max-height:50vh;overflow:auto}
Â  Â  .d-btn{display:flex;align-items:center;justify-content:center;gap:8px;text-decoration:none;color:#0b0b0b;background:linear-gradient(90deg,var(--primary),var(--primary-2));padding:12px 14px;border-radius:12px;font-weight:800;transition:transform .2s ease}
Â  Â  .d-btn:hover{transform:translateY(-2px) scale(1.02)}
Â  Â  .close{position:absolute;top:14px;right:16px;border:0;background:#1b1530;border:1px solid #2a2348;color:#fff;padding:8px 12px;border-radius:999px;cursor:pointer}

Â  Â  /* Helpers */
Â  Â  .muted{color:var(--muted)}

Â  Â  /* Skeletons */
Â  Â  .skeleton{position:relative;overflow:hidden;background:#1a1530;border-radius:16px;border:1px solid #2a2348;aspect-ratio:2/3}
Â  Â  .skeleton::after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.06),transparent);transform:translateX(-100%);animation:shimmer 1.4s infinite}
Â  Â  @keyframes shimmer{to{transform:translateX(100%)}}

Â  Â  /* Sentinel for infinite scroll */
Â  Â  .sentinel{height:1px}
Â  </style>
</head>
<body>
Â  <header class="container header">
Â  Â  <div class="logo"><span>Talha's Collection</span><span class="tld"></span></div>
Â  Â  <div class="searchbar">
Â  Â  Â  <input id="search" type="search" placeholder="Search â€¦" aria-label="Search" autocomplete="off" />
Â  Â  Â  <button class="btn" id="searchBtn">SEARCH</button>
Â  Â  Â  <div id="sugg" class="sugg" role="listbox" aria-label="Suggestions"></div>
Â  Â  </div>
Â  </header>

Â  <main class="container section">
Â  Â  <div class="section-title">
Â  Â  Â  <div class="flame">â•</div>
Â  Â  Â  <h2 class="muted">Welcome</h2>
Â  Â  Â  <a href="https://group.talhascollectionjointrequest.xo.je/" target="_blank" class="request-btn">
Â  Â  Â  Â  Â  Joint Movies, Anime Request Group
Â  Â  Â  </a>
Â  Â  </div>
Â  </main>

Â  <main class="container section">
Â  Â  <div class="section-title">
Â  Â  Â  <div class="flame">ğŸ”¥</div>
Â  Â  Â  <h2>Latest Update</h2>
Â  Â  </div>
Â  Â  <div id="grid" class="grid"></div>
Â  Â  <div id="sentinel" class="sentinel"></div>
Â  </main>

Â  <!-- Modal -->
Â  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="m-title">
Â  Â  <div class="sheet">
Â  Â  Â  <button class="close" id="close">Close âœ•</button>
Â  Â  Â  <div class="sheet-head">
Â  Â  Â  Â  <img id="m-poster" alt="Poster" />
Â  Â  Â  Â  <div class="info">
Â  Â  Â  Â  Â  <h3 id="m-title"></h3>
Â  Â  Â  Â  Â  <p id="m-desc"></p>
Â  Â  Â  Â  Â  <p class="rating">â­ <span id="m-rating">â€”</span></p>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <div id="m-links" class="links"></div>
Â  Â  </div>
Â  </div>

Â  <script type="module">
Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
Â  Â  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

Â  Â  /* === Firebase Config === */
Â  Â  const firebaseConfig = {
Â  Â  Â  apiKey: "AIzaSyDpiN0OV1aD709Q987PymfOOp_lcW6Hid8",
Â  Â  Â  authDomain: "my-book-project-c5a17.firebaseapp.com",
Â  Â  Â  databaseURL: "https://my-book-project-c5a17-default-rtdb.asia-southeast1.firebasedatabase.app",
Â  Â  Â  projectId: "my-book-project-c5a17",
Â  Â  Â  storageBucket: "my-book-project-c5a17.appspot.com",
Â  Â  Â  messagingSenderId: "422603504433",
Â  Â  Â  appId: "1:422603504433:web:e6870a7d2c57c045eb0e10",
Â  Â  Â  measurementId: "G-F763MR7FR9"
Â  Â  };

Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  const db = getDatabase(app);

Â  Â  /* === Elements === */
Â  Â  const grid = document.getElementById('grid');
Â  Â  const sentinel = document.getElementById('sentinel');
Â  Â  const searchInput = document.getElementById('search');
Â  Â  const searchBtn = document.getElementById('searchBtn');
Â  Â  const sugg = document.getElementById('sugg');

Â  Â  /* Skeletons */
Â  Â  const makeSkeletons = (n=12)=>{ grid.innerHTML=''; for(let i=0;i<n;i++) grid.appendChild(Object.assign(document.createElement('div'),{className:'skeleton'})); };
Â  Â  makeSkeletons();

Â  Â  /* Utilities */
Â  Â  const daysAgo = ts => {
Â  Â  Â  if(!ts) return '';
Â  Â  Â  const diff = Math.max(0, Date.now() - ts);
Â  Â  Â  const d = Math.floor(diff / (1000*60*60*24));
Â  Â  Â  if(d===0) return 'Today';
Â  Â  Â  if(d===1) return '1 day ago';
Â  Â  Â  return `${d} days ago`;
Â  Â  };
Â  Â  const clamp = (n,min,max)=> Math.min(max, Math.max(min, n));

Â  Â  function debounce(fn, delay=120){ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a), delay); }; }
Â  Â  function throttle(fn, wait=200){ let last=0, timer; return (...a)=>{ const now=Date.now(); const remaining = wait - (now - last); if(remaining<=0){ last=now; fn(...a); last=Date.now(); } else if(!timer){ timer=setTimeout(()=>{ last=Date.now(); timer=null; fn(...a); }, remaining); } }; }

Â  Â  /* IndexedDB caching */
Â  Â  function openDB(){ return new Promise((resolve,reject)=>{ const req=indexedDB.open('movieCacheDB',1); req.onerror=()=>reject(req.error); req.onsuccess=()=>resolve(req.result); req.onupgradeneeded=()=>{ const db=req.result; if(!db.objectStoreNames.contains('movies')) db.createObjectStore('movies',{ keyPath:'id' }); if(!db.objectStoreNames.contains('meta')) db.createObjectStore('meta',{ keyPath:'key' }); }; }); }
Â  Â  async function saveMoviesToDB(movies){ const db = await openDB(); const tx = db.transaction(['movies','meta'],'readwrite'); const s = tx.objectStore('movies'); const m = tx.objectStore('meta'); s.clear(); movies.forEach(x=>s.put(x)); m.put({key:'updatedAt', value:Date.now()}); return tx.complete; }
Â  Â  async function getMoviesFromDB(){ const db = await openDB(); const tx = db.transaction('movies','readonly'); const s = tx.objectStore('movies'); return new Promise(res=>{ const r = s.getAll(); r.onsuccess=()=>res(r.result||[]); }); }

Â  Â  /* State */
Â  Â  let allMovies=[], filtered=[], pageSize=24,page=1,observer,imgObserver;

Â  Â  /* Lazy load images */
Â  Â  const setupImgObserver = ()=>{
Â  Â  Â  imgObserver && imgObserver.disconnect();
Â  Â  Â  imgObserver = new IntersectionObserver(entries=>{
Â  Â  Â  Â  entries.forEach(entry=>{
Â  Â  Â  Â  Â  Â  if(entry.isIntersecting){
Â  Â  Â  Â  Â  Â  Â  const img = entry.target;
Â  Â  Â  Â  Â  Â  Â  const src = img.getAttribute('data-src');
Â  Â  Â  Â  Â  Â  Â  if(src){ const load=()=>{ img.src=src; img.removeAttribute('data-src'); }; if('requestIdleCallback' in window) requestIdleCallback(load,{timeout:500}); else setTimeout(load,0); }
Â  Â  Â  Â  Â  Â  Â  imgObserver.unobserve(img);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  },{rootMargin:'200px 0px'});
Â  Â  };

Â  Â  /* Render */
Â  Â  const render = debounce(()=>{
Â  Â  Â  grid.innerHTML='';
Â  Â  Â  const total=filtered.length;
Â  Â  Â  const upto=clamp(page*pageSize,0,total);
Â  Â  Â  if(!total){ const empty=document.createElement('p'); empty.textContent='No results found'; empty.style.color='#a7a4b4'; grid.appendChild(empty); return; }
Â  Â  Â  for(let i=0;i<upto;i++){
Â  Â  Â  Â  const m = filtered[i];
Â  Â  Â  Â  const card = document.createElement('div'); card.className='card';
Â  Â  Â  Â  card.innerHTML=`
Â  Â  Â  Â  Â  <img class="thumb" data-src="${m.poster}" alt="${m.title||''}" />
Â  Â  Â  Â  Â  <div class="grad"></div>
Â  Â  Â  Â  Â  ${m.overlay ? `<div class="ribbon">${m.overlay}</div>` : ''}
Â  Â  Â  Â  Â  <div class="meta">
Â  Â  Â  Â  Â  Â  <h3 class="title">${m.title||'Untitled'}</h3>
Â  Â  Â  Â  Â  Â  <p class="subtitle">${daysAgo(m.timestamp)}</p>
Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  card.addEventListener('click',()=>openModal(m));
Â  Â  Â  Â  grid.appendChild(card);
Â  Â  Â  }
Â  Â  Â  setupImgObserver();
Â  Â  },120);

Â  Â  /* Infinite scroll */
Â  Â  const inter = new IntersectionObserver(entries=>{
Â  Â  Â  if(entries[0].isIntersecting){ page++; render(); }
Â  Â  });
Â  Â  inter.observe(sentinel);

Â  Â  /* Search */
Â  Â  searchInput.addEventListener('input', debounce(e=>{
Â  Â  Â  const q = e.target.value.trim().toLowerCase();
Â  Â  Â  if(!q){ filtered=allMovies; sugg.classList.remove('show'); render(); return; }
Â  Â  Â  filtered = allMovies.filter(m=>m.title?.toLowerCase().includes(q));
Â  Â  Â  sugg.innerHTML='';
Â  Â  Â  filtered.slice(0,5).forEach(m=>{
Â  Â  Â  Â  const item=document.createElement('div');
Â  Â  Â  Â  item.className='sugg-item';
Â  Â  Â  Â  item.textContent=m.title; 
Â  Â  Â  Â  item.addEventListener('click',()=>{ searchInput.value=m.title; filtered=[m]; sugg.classList.remove('show'); render(); });
Â  Â  Â  Â  sugg.appendChild(item);
Â  Â  Â  });
Â  Â  Â  if(filtered.length>0) sugg.classList.add('show'); else sugg.classList.remove('show');
Â  Â  Â  render();
Â  Â  },180));

Â  Â  searchBtn.addEventListener('click', ()=>{ filtered=allMovies.filter(m=>m.title?.toLowerCase().includes(searchInput.value.trim().toLowerCase())); render(); });

Â  Â  /* Modal */
Â  Â  const modal = document.getElementById('modal');
Â  Â  const mPoster = document.getElementById('m-poster');
Â  Â  const mTitle = document.getElementById('m-title');
Â  Â  const mDesc = document.getElementById('m-desc');
Â  Â  const mRating = document.getElementById('m-rating');
Â  Â  const mLinks = document.getElementById('m-links');
Â  Â  document.getElementById('close').addEventListener('click', ()=> modal.classList.remove('show'));
Â  Â  modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.classList.remove('show'); });

Â  Â  function openModal(m){
Â  Â  Â  mPoster.src = m.poster || '';
Â  Â  Â  mTitle.textContent = m.title || 'Untitled';
Â  Â  Â  mDesc.textContent = m.description || '';
Â  Â  Â  mRating.textContent = m.rating || 'â€”';

Â  Â  Â  mLinks.innerHTML = '';
Â  Â  Â  const links = Array.isArray(m.downloadLinks) ? m.downloadLinks : [];
Â  Â  Â  if(!links.length){
Â  Â  Â  Â  const d = document.createElement('div');
Â  Â  Â  Â  d.style.color='#a7a4b4';
Â  Â  Â  Â  d.textContent = 'No download links available.';
Â  Â  Â  Â  mLinks.appendChild(d);
Â  Â  Â  } else {
Â  Â  Â  Â  links.forEach((obj)=>{
Â  Â  Â  Â  Â  if(!obj || !obj.url) return;
Â  Â  Â  Â  Â  const a = document.createElement('a');
Â  Â  Â  Â  Â  a.href = obj.url; a.target='_blank'; a.rel='noopener';
Â  Â  Â  Â  Â  a.className = 'd-btn';
Â  Â  Â  Â  Â  a.textContent = (obj.text || 'Download');
Â  Â  Â  Â  Â  mLinks.appendChild(a);
Â  Â  Â  Â  });
Â  Â  Â  }
Â  Â  Â  modal.classList.add('show');
Â  Â  }

Â  Â  /* Fetch movies */
Â  Â  onValue(ref(db,'movies'),snapshot=>{
Â  Â  Â  allMovies = snapshot.val() ? Object.values(snapshot.val()) : [];
Â  Â  Â  filtered = [...allMovies];
Â  Â  Â  page=1; render();
Â  Â  });
Â  </script>
</body>
</html>
