<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JW Player M3U8 Stream Fix</title>
    <script src="https://content.jwplatform.com/libraries/KB5zFt7A.js"></script> <!-- Replace with your JW Player key -->
</head>
<body>
    <div id="myElement">Loading the player...</div>

    <script type="text/javascript">
        // Function to set up the player
        function setupJWPlayer(streamURL, posterImage) {
            jwplayer("myElement").setup({
                file: streamURL,
                type: "hls",
                image: posterImage, // Path to your poster image
                width: "100%",
                aspectratio: "16:9",
                autostart: false,   // Autostart the video or not
                preload: "auto",    // Preload option
                mute: false,
                playbackRateControls: true,
                // Optional: Increase buffer time
                hlshtml: true // Enables HLS native playback
            });

            // Error handling for playback issues
            jwplayer().on('error', function(event) {
                console.error("Playback error: ", event.message);
                retryStream(streamURL);
            });

            // Retry logic if the stream doesn't load
            function retryStream(url) {
                console.log('Retrying stream...');
                setTimeout(function () {
                    jwplayer().load({ file: url });
                    jwplayer().play();
                }, 3000); // Retry after 3 seconds
            }

            // Optional: Show buffering event in console
            jwplayer().on('bufferChange', function(event) {
                console.log("Buffering at: ", event.bufferPercent + "%");
            });

            // Optional: Handle complete event to do something when video finishes
            jwplayer().on('complete', function() {
                console.log('Video playback completed');
            });
        }

        // Initialize the player with your M3U8 stream and poster
        setupJWPlayer("https://cdn.hotflix-bd.online/T-Sports/tracks-v1a1/mono.m3u8?remote=103.173.173.2&token=b2bf96fe8d7170ad5c2bc5e2d93713c23cc4b9da-6cdc07bbc648fb344592288c543ba417-1726311819-1726301019", "https://path/to/your/poster.jpg");
    </script>
</body>
</html>
